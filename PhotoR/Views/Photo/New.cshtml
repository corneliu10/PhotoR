@model PhotoR.Models.Photo
@{
    ViewBag.Title = "Add new photo";
}

<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script type="text/javascript">
    function show(input) {
        if (input.files && input.files[0]) {
            var filerdr = new FileReader();
            filerdr.onload = function (e) {
                $('#user_img').attr('src', e.target.result);
            }
            filerdr.readAsDataURL(input.files[0]);
        }
    }
</script>

<h2>@ViewBag.Title</h2>

@using (Html.BeginForm(actionName: "New", controllerName: "Photo"))
{
    @Html.ValidationSummary(false, "", new { @class = "text-danger" })

    @Html.Label("Uri", "Uri")
    <br />

    @Html.TextBox("Uri", null, new { @class = "form-control" })
    @Html.ValidationMessageFor(m => m.Uri, "", new { @class = "text-danger" })
    <br />

    @Html.Label("Category", "Category")
    <br />
    <select name="CategoryId">
        @foreach (var category in ViewBag.Categories)
        {
            <option value="@category.Id">
                @category.Name
            </option>
        }
    </select>
    <br />
    <br />

    <div>
        <img id="user_img"
             height="100"
             width="90"
             style="border:solid" />
    </div>
    <div>
        <input type="file" title="search image" id="file" name="file" onchange="show(this)" / >
    </div>

    <button class="btn btn-success" type="submit">Add photo</button>
}

